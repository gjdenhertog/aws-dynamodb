<link rel="import" href="../polymer/polymer.html">
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.2.5.min.js"></script>

<!--
A custom polymer element that communicates with AWS DynamoDB

Example:

    <aws-dynamodb data="{{data}}"></aws-dynamodb>

@demo
-->
<script>
  (function() {
    'use strict';

    var AWSDynamoDB = Polymer({
      is: 'aws-dynamodb',

      properties: {

        /**
         * An ordered array of data items produced by the current DynamoDb Query instance.
         */
        data: {
          type: Array,
          readOnly: true,
          notify: true,
          value: function () {
            return [];
          }
        },




        table: {
          type: String
        },

        region: {
          type: String
        },

        authentication: {
          type: Object
        }
      },

      ready: function () {
        AWS.config.update(this.authentication);

        AWS.config.region = this.region;

        var db = new AWS.DynamoDB();

        var params = {
          TableName: this.table,
          Limit: 100
        };

        var save = function (context, nothing, data) {
          context.data = data.Items;
        };

        db.scan(params, save.bind(null, this));
      }
    });
  })();
</script>